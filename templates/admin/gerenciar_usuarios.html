{% extends "layouts/base_admin.html" %}
{% block admin_content %}
  <h2>Gerenciar Usuários</h2>

  {% if tipo == 'aluno' %}
    <h3>Alunos</h3>
    <a class="btn" href="#" onclick="document.getElementById('criar-aluno').scrollIntoView()">Criar aluno</a>
    <table class="table">
      <thead><tr><th>Nome</th><th>Email</th><th>Ações</th></tr></thead>
      <tbody>
        {% for u in alunos %}
          <tr>
            <td>{{ u.nome }}</td>
            <td>{{ u.email }}</td>
            <td>
              <a href="{{ url_for('admin.form_editar_aluno', id=u.id) }}">Editar</a>
              <form action="{{ url_for('admin.deletar_aluno', id=u.id) }}" method="post" style="display:inline;">
                <button type="submit" onclick="return confirm('Deletar?')">Deletar</button>
              </form>
            </td>
          </tr>
        {% else %}
          <tr><td colspan="3">Nenhum aluno.</td></tr>
        {% endfor %}
      </tbody>
    </table>

    <section id="criar-aluno">
      <h4>Criar Aluno</h4>
      <form action="{{ url_for('admin.criar_aluno') }}" method="post">
        <label>Nome<input name="nome" required></label>
        <label>Email<input type="email" name="email" required></label>
        <label>Senha<input type="password" name="senha" required></label>
        <button type="submit">Criar</button>
      </form>
    </section>
  {% elif tipo == 'administrador' %}
    <h3>Administradores</h3>
    <table class="table">
      <thead><tr><th>Nome</th><th>Email</th><th>Ações</th></tr></thead>
      <tbody>
        {% for u in administradores %}
          <tr>
            <td>{{ u.nome }}</td>
            <td>{{ u.email }}</td>
            <td>
              <form action="{{ url_for('admin.deletar_admin', id=u.id) }}" method="post" style="display:inline;">
                <button type="submit">Deletar</button>
              </form>
            </td>
          </tr>
        {% else %}
          <tr><td colspan="3">Nenhum administrador.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endblock %}
